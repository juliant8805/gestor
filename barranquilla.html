<!DOCTYPE html>
<html >
    <head>  
        <meta charset="UTF-8">
        <title>Ingreso Plataforma</title>
        <link rel="stylesheet" href="css/normalize.css">
        <link rel="stylesheet" href="css/login.css">
        <script src="js/prefixfree.min.js"></script>
         <video width="100%" autoplay loop>
         <source src="demo.mp4" type="video/mp4" controls>
        Por favor utilice otro navegador (Chrome, Mozilla, Safari, Explorer).
        </video>     
        </head>
        <body onload="onload()">
        <div class="login">
           <img src="./imagenes/logo_login.png">
            <form method="post" action="validacion.html">
                <input type="text" id="u" name="u" placeholder="Usuario" required="required" />
                <input type="password" id="p" name="p" placeholder="ContraseÃ±a" required="required" />
                <button type="submit" id="b" class="btn btn-primary btn-block btn-circle" onclick="setCookie()">Log in</button>
                <h2 id="er" class="error" hidden="hidden">Credenciales no validas</h2>
                <h2 id="er1" class="error" hidden="hidden">Por favor ingrese desde Google Chrome</h2>
            </form>
        </div>
        <script src="js/index.js"></script>
        <script src="js/md5.inc.js"></script>
        <script>
        function onload(){
            var cookies = document.cookie.split(";");
            for (var i = 0; i < cookies.length; i++)
            {
                deleteCookie(cookies[i].split("=")[0]);
            }
            var val = document.location.href;
            var validar = val.split("?");
            if (validar[1] == "ig=error")
            {
                document.getElementById('er').style.display = 'block';
            }
            else
            {
                document.getElementById('er').style.display = 'none';    
            }
             if (validar[1] == "ig=navegador")
            {
                document.getElementById('er1').style.display = 'block';
            }
            else
            {
                document.getElementById('er1').style.display = 'none';    
            }
        }
        function setC(name, value, expirydays) {
            var d = new Date();
            d.setTime(d.getTime() + (expirydays*24*60*60*1000));
            var expires = "expires="+ d.toGMTString();
            //console.log(name + "=" + value + "; " + expires+";path=/");
            document.cookie = name + "=" + value + "; " + expires+";path=/";;
        }

        function deleteCookie(name){
            setC(name,"",-1);
        }
        function setCookie(cname, cvalue, exdays) {
            if (document.getElementById("u").value != "" && document.getElementById("p").value != "")
            {
                var pw = hex_md5(document.getElementById("p").value);
                var now = new Date();
                var time = now.getTime();
                var expireTime = time + 1000*36000;
                now.setTime(expireTime);
                //console.log(document.getElementById("u").value + "=" + pw + ";expires="+now.toGMTString()+";path=/");
                document.cookie = document.getElementById("u").value + "=" + pw + ";expires="+now.toGMTString()+";path=/";
            }
        }
    </script>              
    </body>
</html>